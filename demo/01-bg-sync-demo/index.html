<!DOCTYPE html>
<html>
<head>
	<title>Backgroud Sync</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
<h1>Backgroud Sync</h1>
<button id="btnSend">Send data!</button>
<script type="text/javascript">
Notification.requestPermission();

async function initServiceWorker(){	
	let reg = await navigator.serviceWorker.register('./sw.js');
	reg = await navigator.serviceWorker.ready;

	document.getElementById('btnSend').addEventListener(
		'click', async () => {
		await reg.sync.register('syncdata');
	    console.log('Sync registered');
	});
}

if ('serviceWorker' in navigator) {
	initServiceWorker();
}
</script>
</body>
</html>